#include  <stdio.h>
#include  <sys/types.h>
#include <stdlib.h>

char mesg[10000];

void execute_ls() {
    int c = 0;
    FILE *fp;
    char path[1035];

    /* Open the command for reading. */
    fp = popen("/bin/ls", "r");

    /* Read the output a line at a time - output it. */
    while (fgets(path, sizeof(path)-1, fp) != NULL) {
        c += sprintf(c+mesg, "%s", path);
    }
    /* close */
    pclose(fp);
}

int main() {
    execute_ls();

    printf("%s", mesg);
    return 0;
}

